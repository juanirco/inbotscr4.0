export class ToolbarManager{constructor(t,e){this.editor=t,this.toolbar=null,this.selectedBlock=null,this.selectedTextElement=null,this.callbacks=e}createSidebarToolbar(){const t=document.createElement("div");t.className="editor-sidebar-toolbar",t.innerHTML='\n            <div class="toolbar-section">\n                <h4>Bloques</h4>\n                <div class="toolbar-group block-controls">\n                    <div class="toolbar-row">\n                        <label>Tama√±o:</label>\n                        <button type="button" class="toolbar-btn size-btn" data-size="small" title="Peque√±o (50%)">S</button>\n                        <button type="button" class="toolbar-btn size-btn active" data-size="medium" title="Mediano (80%)">M</button>\n                        <button type="button" class="toolbar-btn size-btn" data-size="large" title="Grande (95%)">L</button>\n                    </div>\n                    <div class="toolbar-row">\n                        <label>Alinear:</label>\n                        <button type="button" class="toolbar-btn align-btn" data-align="left" title="Izquierda">‚óÄ</button>\n                        <button type="button" class="toolbar-btn align-btn active" data-align="center" title="Centro">‚ñ†</button>\n                        <button type="button" class="toolbar-btn align-btn" data-align="right" title="Derecha">‚ñ∂</button>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="toolbar-section">\n                <h4>Texto</h4>\n                <div class="toolbar-group text-controls">\n                    <div class="toolbar-row">\n                        <button type="button" class="toolbar-btn format-btn" data-format="bold" title="Negrita"><strong>B</strong></button>\n                        <button type="button" class="toolbar-btn format-btn" data-format="italic" title="Cursiva"><em>I</em></button>\n                        <button type="button" class="toolbar-btn format-btn" data-format="underline" title="Subrayado"><u>U</u></button>\n                        <button type="button" class="toolbar-btn format-btn" data-format="link" title="Enlace">üîó</button>\n                    </div>\n                    <div class="toolbar-row">\n                        <label>Color:</label>\n                        <select class="toolbar-select color-select">\n                            <option value="">Normal</option>\n                            <option value="primary">Primario</option>\n                            <option value="secondary">Secundario</option>\n                            <option value="accent">Acento</option>\n                            <option value="success">√âxito</option>\n                            <option value="warning">Advertencia</option>\n                            <option value="danger">Peligro</option>\n                        </select>\n                    </div>\n                    <div class="toolbar-row">\n                        <label>Tama√±o:</label>\n                        <select class="toolbar-select size-select">\n                            <option value="">Normal</option>\n                            <option value="small">Peque√±o</option>\n                            <option value="large">Grande</option>\n                            <option value="xl">Extra Grande</option>\n                        </select>\n                    </div>\n                    <div class="toolbar-row">\n                        <label>Alinear texto:</label>\n                        <button type="button" class="toolbar-btn text-align-btn" data-align="left" title="Izquierda">‚óÄ</button>\n                        <button type="button" class="toolbar-btn text-align-btn active" data-align="center" title="Centro">‚ñ†</button>\n                        <button type="button" class="toolbar-btn text-align-btn" data-align="right" title="Derecha">‚ñ∂</button>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="toolbar-section">\n                <h4>Acciones</h4>\n                <div class="toolbar-group action-controls">\n                    <button type="button" class="toolbar-btn action-btn" data-action="duplicate" title="Duplicar bloque">üìã</button>\n                    <button type="button" class="toolbar-btn action-btn danger" data-action="delete" title="Eliminar bloque">üóëÔ∏è</button>\n                </div>\n            </div>\n        ',this.editor.parentNode.insertBefore(t,this.editor),this.toolbar=t,this.disableToolbar(),this.setupToolbarEvents()}setupToolbarEvents(){this.toolbar.querySelectorAll(".size-btn").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.selectedBlock&&(this.callbacks.applyBlockSize(this.selectedBlock,t.dataset.size),this.updateToolbarState())})}),this.toolbar.querySelectorAll(".align-btn").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.selectedBlock&&(this.callbacks.applyBlockAlign(this.selectedBlock,t.dataset.align),this.updateToolbarState())})}),this.toolbar.querySelectorAll(".format-btn").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.selectedTextElement&&this.callbacks.handleTextFormat(this.selectedTextElement,t.dataset.format)})}),this.toolbar.querySelector(".color-select").addEventListener("change",t=>{this.selectedTextElement&&this.callbacks.applyTextColor(this.selectedTextElement,t.target.value)}),this.toolbar.querySelector(".size-select").addEventListener("change",t=>{this.selectedTextElement&&this.callbacks.applyTextSize(this.selectedTextElement,t.target.value)}),this.toolbar.querySelectorAll(".text-align-btn").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.selectedTextElement&&(this.callbacks.applyTextAlign(this.selectedTextElement,t.dataset.align),this.updateToolbarState())})}),this.toolbar.querySelectorAll(".action-btn").forEach(t=>{t.addEventListener("click",e=>{if(e.preventDefault(),!this.selectedBlock)return;const l=t.dataset.action;"duplicate"===l?this.callbacks.duplicateBlock(this.selectedBlock):"delete"===l&&this.callbacks.deleteBlock(this.selectedBlock)})})}updateToolbarState(){this.selectedBlock?(this.enableToolbar(),this.toolbar.querySelectorAll(".size-btn").forEach(t=>{t.classList.remove("active"),this.selectedBlock.classList.contains("block-size-"+t.dataset.size)&&t.classList.add("active")}),this.toolbar.querySelectorAll(".align-btn").forEach(t=>{t.classList.remove("active"),this.selectedBlock.classList.contains("block-align-"+t.dataset.align)&&t.classList.add("active")}),this.selectedTextElement&&this.toolbar.querySelectorAll(".text-align-btn").forEach(t=>{t.classList.remove("active"),this.selectedTextElement.classList.contains("text-align-"+t.dataset.align)&&t.classList.add("active")})):this.disableToolbar()}enableToolbar(){this.toolbar.classList.remove("disabled")}disableToolbar(){this.toolbar.classList.add("disabled")}setSelectedBlock(t){this.selectedBlock=t}setSelectedTextElement(t){this.selectedTextElement=t}}